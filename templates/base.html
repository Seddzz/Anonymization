<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Anonymize Me{% endblock %}</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Custom styles -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
</head>
<body class="min-h-screen flex flex-col items-center justify-center p-4" data-theme="dark">
    <!-- Theme Toggle Button -->
    <button 
        id="themeToggle" 
        class="fixed top-4 right-4 p-3 rounded-full transition-all duration-300 z-50 theme-toggle-btn"
        aria-label="Toggle theme">
        <!-- Sun icon (visible in dark mode) -->
        <svg id="sunIcon" class="w-5 h-5 transition-opacity" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"/>
        </svg>
        <!-- Moon icon (visible in light mode) -->
        <svg id="moonIcon" class="w-5 h-5 transition-opacity opacity-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"/>
        </svg>
    </button>

    {% block content %}{% endblock %}

    <script>
        // Theme toggle functionality
        const themeToggle = document.getElementById('themeToggle');
        const body = document.body;
        const sunIcon = document.getElementById('sunIcon');
        const moonIcon = document.getElementById('moonIcon');

        // Check for saved theme preference or default to 'dark'
        const savedTheme = localStorage.getItem('theme') || 'dark';
        setTheme(savedTheme);

        themeToggle.addEventListener('click', () => {
            const currentTheme = body.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            setTheme(newTheme);
            localStorage.setItem('theme', newTheme);
        });

        function setTheme(theme) {
            body.setAttribute('data-theme', theme);
            
            if (theme === 'light') {
                sunIcon.style.opacity = '0';
                moonIcon.style.opacity = '1';
                sunIcon.style.color = '#343a40';
                moonIcon.style.color = '#343a40';
            } else {
                sunIcon.style.opacity = '1';
                moonIcon.style.opacity = '0';
                sunIcon.style.color = '#ffffff';
                moonIcon.style.color = '#ffffff';
            }
        }
    </script>
</body>
</html>